<head>
  <title>TestCircles</title>
  <link rel="icon" href="/favicon.ico">
</head>

<body>
  {{> lobby}}
  {{> game}}
</body>

<!-- ------------------------ -->

<template name="lobby">
  <div class="lobby">
    Enter thy name:
      <input type="text" value="{{getname}}" class="nameinput" maxlength="25"/>
      <br/>
      Greetings, <b>{{getname}}</b>.
      <br/> <br/> <br/>
    {{numconnected}}
    <div class="playerlist">
      {{#each playerlist}}
        {{> playerbutton this}}
      {{/each}}
    </div>
      <br/> <br/>
    {{> mychallenge}}
      <br/> <br/>
    {{#each challengers}}
        {{> challenge this}}
    {{/each}}
    {{> chat}}
  </div>
</template>

<template name="playerbutton">
  <input type=button class=playerbutton value='{{name}}'> <br>
</template>

<template name="mychallenge">
  <div class=challenge>
      Challenging {{getmychallenge}}: <br>{{{status}}}
      {{#if showcancel}} <br> <br>
        <input type=button class=playerbutton name="cancel" value="Cancel">
      {{/if}}
  </div>
</template>

<template name="challenge">
  <div class=challenge>
    {{player_1_name}} has challenged you. <br> <br>
    <input type=button class=playerbutton name="accept" value="Accept">
    <input type=button class=playerbutton name="decline" value="Decline">
  </div> <br> <br>
</template>


<template name="chat">
    <div class=chatwrapper>
        <div class=chat>
            {{#each messages}}
            {{{showmessage this}}}
            {{/each}}
        </div>
        <input type="text" placeholder="Chat" class="chatinput" />
    </div>
</template>

<!-- ------------------------ -->

<template name="game">
    <div class=game>
        {{> gameui}}
        <div class=gamecontent>
        </div>
    </div>
</template>

<template name="gameui">
    <div class=gameui>
        <div class=uibox style="background-color:{{client_color}};width:40px"> </div>
        <div class=uibox>
            Resources: {{resource_amount}} <br>
            {{towertype}} <br>
            Cost: {{towercost}}
        </div>
        <div class=uibox name="towertypes" style="padding-top:6px;height:calc(100% - 16px)">
            {{#each towertypes}}
            {{> towerimg this}}
            {{/each}}
            <!-- <button class=uibutton name="prev_tower" style="height:100%;vertical-align:top"> &lt; </button>
            <img src={{towerurl}} width='64' height='64' style='display:inline;vertical-align:middle'>
            <button class=uibutton name="next_tower" style="height:100%;vertical-align:top"> &gt; </button> !-->
        </div>
        <div class=uibox>
            <img src={{seltowerurl}} width='64' height='64' style='display:inline;vertical-align:middle;float:left;margin-right:8px'>
            <button class=uibutton name="salvage"> Salvage </button>
        </div>
        <a href="HowToPlay.txt" target="blank">How to Play</a>
    </div>
</template>

<template name="towerimg">
    <img src={{towerurl}} width="64" height="64" towertype={{type}} style="opacity:{{canafford}};border:4px solid {{selectedborder}}">
</template>
